# 区间种类数

```cpp
#include<bits/stdc++.h>
using namespace std;
#ifdef _LOCAL
    #define test(x) cerr << #x << "=" << x << endl
#else
    #define test(x)
#endif

const int N = 100005;
const int Q = 100005;

int a[N];

int n, q;
int block;

inline int belong(int x){
	return x / block;
}

struct Node
{
	int l, r, id;
	bool friend operator < (const Node &a, const Node &b){
		if(belong(a.l) == belong(b.l)){
			return a.r < b.r;
		}else{
			return a.l < b.l;
		}
	}
}node[Q];

int ans[Q];
int vis[N];

inline int add(int x){
	return vis[a[x]] ++ == 0;
}

inline int sub(int x){
	return -- vis[a[x]] == 0;
}

int main()
{
    #ifdef _LOCAL
        freopen("data.in", "r", stdin);
    #endif
	scanf("%d%d", &n, &q);
	block = sqrt(n);
	for(int i = 1;i <= n; i ++){
		scanf("%d", &a[i]);
	}
	for(int i = 1; i <= q; i ++){
		scanf("%d%d", &node[i].l, &node[i].r);
		node[i].id = i;
	}
	sort(node + 1, node + 1 + q);
	int left = 1, right = 0, kinds = 0;
	for(int i = 1; i <= q; i ++){
		while(right < node[i].r) kinds += add(++right);
		while(right > node[i].r) kinds -= sub(right--);
		while(left < node[i].l) kinds -= sub(left++);
		while(left > node[i].l) kinds += add(--left);
		ans[node[i].id] = kinds;
	}
	for(int i = 1; i <= q; i ++){
		printf("%d\n", ans[i]);
	}
    #ifdef _LOCAL
        fprintf(stderr, "T: %d ms\n", int(1000.0 * clock() / CLOCKS_PER_SEC));
    #endif
	return 0;
}
```